## MySQL数据类型及范围用法

#### 一、MySQL的数据类型

##### 主要包括五大类：

整数类型：BIT、BOOL、TINY INT、SMALL INT、MEDIUM INT、 INT、 BIG INT

浮点数类型：FLOAT、DOUBLE、DECIMAL

字符串类型：CHAR、VARCHAR、TINY TEXT、TEXT、MEDIUM TEXT、LONGTEXT、TINY BLOB、BLOB、MEDIUM BLOB、LONG BLOB

日期类型：Date、DateTime、TimeStamp、Time、Year

其他数据类型：BINARY、VARBINARY、ENUM、SET、Geometry、Point、MultiPoint、LineString、MultiLineString、Polygon、GeometryCollection等

#### 二、MYSQL数据类型的长度和范围

#### **2.1 数值类型**

MySQL 支持所有标准SQL 中的数值类型，其中包括严格数值类型（INTEGER、SMALLINT、DECIMAL 和NUMERIC），以及近似数值数据类型（FLOAT、REAL 和DOUBLE PRECISION），并在标准SQL的基础上扩展增加了 TINYINT、MEDIUMINT 和bigint 这3 种长度不同的整型和存放位数据的BIT类型。在日常建表定义当中，整型中最常用的依旧是int类型的数据，浮点型中则视情况而定。

##### 2.1.1 整型

| 类型        | 存储(字节) | 无符号范围  | 有符号范围                | 用途     | 默认显示宽度 |
| :---------- | ---------- | :---------- | :------------------------ | -------- | ------------ |
| tinyint     | 1          | [0, 255]    | [-128, 127]               | 很小整数 | 4            |
| smallint    | 2          | [0, 65535]  | [-32768, 32767]           | 小整数   | 6            |
| mediumint   | 3          | 0-1677w     | [-8388608, 8388607]       | 中等整数 | 9            |
| int/integer | 4          | 0-42e       | [-2147483648, 2147483647] | 普通整数 | 11           |
| bigint      | 8          | 0-18446744e | ±9223372e                 | 大整数   | 20           |

**int (10) 和 int (11) 有什么区别？**

显示宽度整数类型的取值范围是无关的。显示宽度只是指明 mysql 最大可能显示的数字个数，数值的位数小于指定的宽度时左侧用数字 0 填充，如果插入了大于显示宽度的值，只要该值不超过该类型整数的取值范围，数值依然可以插入，而且能够显示出来。所以 int (10) 和 int (11) 没有任何区别，就是显示宽度不同。



无符号的范围计算公式如下:

![](https://img-blog.csdnimg.cn/20200309150453284.png)

有符号的计算公式如下:

![](https://img-blog.csdnimg.cn/20200309150501675.png)

##### 2.1.2 浮点型

可以用两种方式来表示小数，分别是浮点数类型与定点数类型。
浮点数用于不需要太精确的小数场合，类型包括FLOAT与DOUBLE，定点数类型就是DECIMAL。

| 类型                  | 字节数                    | 含义                           | 范围                         |
| :-------------------- | :------------------------ | ------------------------------ | :--------------------------- |
| FLOAT(m, d)           | 4                         | 单精度浮点型，m总个数，d小数位 | ± 1.17e-38 - 3.4e+38 和 0    |
| DOUBLE(m ,d)          | 8                         | 双精度浮点型，m总个数，d小数位 | ± 2.22e-308 - 1.79e+308 和 0 |
| DEC(M,D)/DECIMAL(M,D) | 如果M>D，为M+2；否则为D+2 | decimal是存储为字符串的浮点数  | 取决于M与D                   |



#### 2.2 字符串类型

MySQL 提供了 8 个基本的字符串类型，可以存储的范围从简单的一个字符到巨大的文本块或二进制字符串数据。

| 类型       | 大小                | 用途                            |
| ---------- | ------------------- | ------------------------------- |
| CHAR       | 0-255字节           | 定长字符串                      |
| VARCHAR    | 0-255字节           | 变长字符串                      |
| TINYBLOB   | 0-255字节           | 不超过 255 个字符的二进制字符串 |
| TINYTEXT   | 0-255字节           | 短文本字符串                    |
| BLOB       | 0-65 535字节        | 二进制形式的长文本数据          |
| TEXT       | 0-65 535字节        | 长文本数据                      |
| MEDIUMBLOB | 0-16 777 215字节    | 二进制形式的中等长度文本数据    |
| MEDIUMTEXT | 0-16 777 215字节    | 中等长度文本数据                |
| LOGNGBLOB  | 0-4 294 967 295字节 | 二进制形式的极大文本数据        |
| LONGTEXT   | 0-4 294 967 295字节 | 极大文本数据                    |



| MySQL数据类型 | 含义                            |
| ------------- | ------------------------------- |
| char(n)       | 固定长度，最多255个字符         |
| varchar(n)    | 可变长度，最多65535个字符       |
| tinytext      | 可变长度，最多255个字符         |
| text          | 可变长度，最多65535个字符       |
| mediumtext    | 可变长度，最多2的24次方-1个字符 |
| longtext      | 可变长度，最多2的32次方-1个字符 |



1.char（n）和varchar（n）中括号中n代表字符的个数，并不代表字节个数，所以当使用了中文的时候(UTF8)意味着可以插入m个中文，但是实际会占用m*3个字节。
2.同时char和varchar最大的区别就在于char不管实际value都会占用n个字符的空间，而varchar只会占用实际字符应该占用的空间+1，并且实际空间+1<=n。
3.超过char和varchar的n设置后，字符串会被截断。
4.char的上限为255字节，varchar的上限65535字节，text的上限为65535。
5.char在存储的时候会截断尾部的空格，varchar和text不会。
6.varchar会使用1-3个字节来存储长度，text不会。



##### CHAR 和 VARCHAR 类型

　　CHAR 类型用于定长字符串，并且必须在圆括号内用一个大小修饰符来定义。这个大小修饰符的范围从 0-255。比指定长度大的值将被截短，而比指定长度小的值将会用空格作填补。

　　CHAR 类型可以使用 BINARY 修饰符。当用于比较运算时，这个修饰符使 CHAR 以二进制方式参于运算，而不是以传统的区分大小写的方式。

　　CHAR 类型的一个变体是 VARCHAR 类型。它是一种可变长度的字符串类型，并且也必须带有一个范围在 0-255 之间的指示器。CHAR 和 VARCHGAR 不同之处在于 MySQL 数据库处理这个指示器的方式：CHAR 把这个大小视为值的大小，不长度不足的情况下就用空格补足。而 VARCHAR 类型把它视为最大值并且只使用存储字符串实际需要的长度（增加一个额外字节来存储字符串本身的长度）来存储值。所以短于指示器长度的 VARCHAR 类型不会被空格填补，但长于指示器的值仍然会被截短。

　　因为 VARCHAR 类型可以根据实际内容动态改变存储值的长度，所以在不能确定字段需要多少字符时使用 VARCHAR 类型可以大大地节约磁盘空间、提高存储效率。

　　VARCHAR 类型在使用 BINARY 修饰符时与 CHAR 类型完全相同。

##### TEXT 和 BLOB 类型

　　对于字段长度要求超过 255 个的情况下，MySQL 提供了 TEXT 和 BLOB 两种类型。根据存储数据的大小，它们都有不同的子类型。这些大型的数据用于存储文本块或图像、声音文件等二进制数据类型。

　　TEXT 和 BLOB 类型在分类和比较上存在区别。BLOB 类型区分大小写，而 TEXT 不区分大小写。大小修饰符不用于各种 BLOB 和 TEXT 子类型。比指定类型支持的最大范围大的值将被自动截短。



char和varchar：
1.char(n) 若存入字符数小于n，则以空格补于其后，查询之时再将空格去掉。所以char类型存储的字符串末尾不能有空格，varchar不限于此。
2.char(n) 固定长度，char(4)不管是存入几个字符，都将占用4个字节，varchar是存入的实际字符数+1个字节（n<=255）或2个字节(n>255)，所以varchar(4),存入3个字符将占用4个字节。
3.char类型的字符串检索速度要比varchar类型的快。

varchar和text：
1.varchar可指定n，text不能指定，内部存储varchar是存入的实际字符数+1个字节（n<=255）或2个字节(n>255)，text是实际字符数+2个字节。
2.text类型不能有默认值。
3.varchar可直接创建索引，text创建索引要指定前多少个字符。varchar查询速度快于text,在都创建索引的情况下，text的索引似乎不起作用。

#### **2.3 日期和时间类型**

​		在处理日期和时间类型的值时，MySQL 带有 5 个不同的数据类型可供选择。它们可以被分成简单的日期、时间类型，和混合日期、时间类型。根据要求的精度，子类型在每个分类型中都可以使用，并且 MySQL 带有内置功能可以把多样化的输入格式变为一个标准格式。

| 类型      | 大小    (字节) | 取值范围                                   | 格式                | 用途                     |
| --------- | -------------- | ------------------------------------------ | ------------------- | ------------------------ |
| DATE      | 3              | [1000-01-01, 9999-12-31]                   | YYYY-MM-DD          | 日期值                   |
| TIME      | 3              | [-838:59:59, 838:59:59]                    | HH:MM:SS            | 时间值或持续时间         |
| YEAR      | 1              | [1901, 2155]                               | YYYY                | 年份值                   |
| DATETIME  | 8              | [1000-01-01 00:00:00, 9999-12-31 23:59:59] | YYYY-MM-DD HH:MM:SS | 混合日期和时间值         |
| TIMESTAMP | 4              | [19700101080001, 20380119111407]           | YYYYMMDD HHMMSS     | 混合日期和时间值，时间戳 |


若定义一个字段为timestamp，这个字段里的时间数据会随其他字段修改的时候自动刷新，所以这个数据类型的字段可以存放这条记录最后被修改的时间。



#### 数据类型的属性

上面大概总结了MySQL中的数据类型，下面就再来总结一些常用的属性。

**1. auto_increment**

auto_increment能为新插入的行赋一个唯一的整数标识符。为列赋此属性将为每个新插入的行赋值为上一次插入的ID+1。

MySQL要求将auto_increment属性用于作为主键的列。此外，每个表只允许有一个auto_increment列。例如：id smallint not null auto_increment primary key

**2. binary**

binary属性只用于char和varchar值。当为列指定了该属性时，将以区分大小写的方式排序。与之相反，忽略binary属性时，将使用不区分大小写的方式排序。例如：hostname char(25) binary not null

**3. default**

default属性确保在没有任何值可用的情况下，赋予某个常量值，这个值必须是常量，因为MySQL不允许插入函数或表达式值。此外，此属性无法用于BLOB或TEXT列。如果已经为此列指定了NULL属性，没有指定默认值时默认值将为NULL，否则默认值将依赖于字段的数据类型。例如：subscribed enum('0', '1') not null default '0'

**4. index**

如果所有其他因素都相同，要加速数据库查询，使用索引通常是最重要的一个步骤。索引一个列会为该列创建一个有序的键数组，每个键指向其相应的表行。以后针对输入条件可以搜索这个有序的键数组，与搜索整个未索引的表相比，这将在性能方面得到极大的提升。

代码:
create table employees
(
id varchar(9) not null,
firstname varchar(15) not null,
lastname varchar(25) not null,
email varchar(45) not null,
phone varchar(10) not null,
index lastname(lastname),
primary key(id)
);

我们也可以利用MySQL的create index命令在创建表之后增加索引：create index lastname on employees (lastname(7));



这一次只索引了名字的前7个字符，因为可能不需要其它字母来区分不同的名字。因为使用较小的索引时性能更好，所以应当在实践中尽量使用小的索引。

**5. not null**

如果将一个列定义为not null，将不允许向该列插入null值。建议在重要情况下始终使用not null属性，因为它提供了一个基本验证，确保已经向查询传递了所有必要的值。

**6. null**

为列指定null属性时，该列可以保持为空，而不论行中其它列是否已经被填充。记住，null精确的说法是“无”，而不是空字符串或0。

**7. primary key**

primary key属性用于确保指定行的唯一性。指定为主键的列中，值不能重复，也不能为空。为指定为主键的列赋予auto_increment属性是很常见的，因为此列不必与行数据有任何关系，而只是作为一个唯一标识符。主键又分为以下两种：

(1) 单字段主键

如果输入到数据库中的每行都已经有不可修改的唯一标识符，一般会使用单字段主键。注意，此主键一旦设置就不能再修改。

(2) 多字段主键

如果记录中任何一个字段都不可能保证唯一性，就可以使用多字段主键。这时，多个字段联合起来确保唯一性。如果出现这种情况，指定一个auto_increment整数作为主键是更好的办法。

**8. unique**

被赋予unique属性的列将确保所有值都有不同的值，只是null值可以重复。一般会指定一个列为unique，以确保该列的所有值都不同。例如：email varchar(45) unique

**9.zerofill**

zerofill属性可用于任何数值类型，用0填充所有剩余字段空间。例如，无符号int的默认宽度是10；因此，当“零填充”的int值为4时，将表示它为0000000004。例如：orderid int unsigned zerofill not null




#### 三、总结

​		通过对每种数据类型的用途，物理存储，表示范围等有一个概要的了解。这样在面对具体应用时，就可以根据相应的特来来选择合适的数据类型，使得我们能够争取在满足应用的基础上，用较小的存储代价换来较高的数据库性能。

​		选用数据类型的原则：

   1)选择最小的可用的类型；

   2)从速度方面考虑，选择固定的列  使用CHAR类型；

   3)从节省空间考虑，选择动态的列，使用VARCHAR类型。

   高性能数据库设计原则：

   **第一步：**大致确定字段的数据类型，数字，字符串，时间等，比较直观。

   **第二步：**确定特定的类型，比如说 ：数字里有TINYINT、SMALLINT、INT、LONGINT等，选择最合适的一个(更小通常更好)

   **第三步：**如有必要，请为字段设置默认值。

   当然，索引优化肯定是必不可少的，不过这属于设计表完成之后的优化范围了。
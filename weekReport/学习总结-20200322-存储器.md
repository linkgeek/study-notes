## 存储器

### 1.什么是存储器

存储器，顾名思义，是用来储存物质的。在计算机中，这些储存的物质就是**数据**和**指令**，有了存储器，计算机就有了记忆功能。

存储器由一些编号的单元所组成，单元的编号叫做地址。打个比方，存储器就像是一个大型仓库，仓库里面有很多个房间存放着货物，每个房间都有自己的房号；而存储器单元好比房间，房间里的货物好比数据和指令，而单元的编号（地址）就好比房间号，我们的计算机就是根据这个地址来存放或取出数据和指令的。

计算机中的全部信息，包括输入的原始数据、计算机程序、中间运行结果和最终运行结果都保存在存储器中。

### 2.存储器的分类

按存储介质来划分，存储器可分为**半导体存储器**和**磁存储器**。其中，半导体存储器存储的元器件是由半导体组成的，常见的如：内存、U盘、固态硬盘等；磁存储器，是由表面涂有磁性材料的存储介质组成的，常见的有：磁带、磁盘。

![](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190924160528804-680325528.png)

按存取方式来分类，可以将存储器分为**随机存储器（RAM）、串行存储器、只读存储器（ROM）**

![](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190924160538631-205760699.png)

### 3.存储器的层次结构

在选取计算机的存储器时，通常需要考虑的因素是存储器的读写速度、存储容量、价格，我们希望读写速度越快越好、存储容量越大越好、价格则越低越好。有一个专门的单位，用来量化存储器的性价比——**位价**。位价综合地把容量和价格都考虑进去了，它的含义是每比特位的价格，使用位价可以客观地描述存储器的性价比。

![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190924160554844-1187931941.png)

按照位价和读写速度的关系，可以把存储器划分为几个层次：**缓存、主存、辅存**。

缓存指的是CPU里的**寄存器**以及**高速缓存**，速度快，位价高。

主存指的主要是计算机里的**内存**，速度适中，价格适中。

辅存指的是**外部储存设备**，如磁盘、U盘、移动硬盘等，速度慢，价格低。



![](http://pre.jiatengfei.com/uploads/article/20200322/5e7718c2f22d6.png)



之前文章里已经提到过，CPU是高速运算的，处理速率极快；而存储器没有CPU快，传输数据和程序到CPU里时速度慢，这会导致CPU经常空转等待数据传输，两者在速度上是不匹配的。理论上，不考虑价格的话，我们肯定希望缓存越大越好，但是由于位价的存在，缓存不可能做的越大越好，因此才有了这个层次结构。

存储器的层次结构也可以使用如下图来表达：

![img](http://pre.jiatengfei.com/uploads/article/20200322/5e77232333ac5.png)

图示里，CPU与高速缓存是直接通信的，也可以跟主存进行通信。而高速缓存和主存之间也可以相互通信，称之为缓存-主存层次，除了缓存-主存层次，还有主存和辅存之间的通信，这个通信，CPU是不参与的，称之为主存-辅存层次。

缓存-主存层次，是在CPU与主存之间增加一层速度快容量小的Cache，目的是解决主存与CPU速度不匹配的问题。有了高速缓存的存在，CPU就可以通过一定的策略，尽可能地去访问这个高速缓存而不是主存，从而有效提高CPU的利用效率以及计算机的运行速度。CPU选取数据时，首先会从缓存中去取，缓存中没有的话，再会去取主存中的。

主存-辅存层次，是在主存之外增加辅助存储器（磁盘、SD卡、U盘等），目的是解决主存容量不足的问题。假设我们运行一个超大型游戏，而内存通常只有8G，此时，就可以把游戏当前使用的数据加载到内存中，把不使用的数据放在辅存中。



### 主存储器-内存

内存是随机存储器，它是通过电容存储数据，必须隔一段时间刷新一次，如果断电，那么一段时间后数据会丢失，主存的基本组成和CPU的联系如下图：

![](http://pre.jiatengfei.com/uploads/article/20200322/5e772c26a073b.png)

现代计算机的主存都由半导体集成电路构成，图中的驱动器，译码器和读写电路均制作在存储芯片中，而MAR和MDR制作在CPU芯片中，存储芯片和CPU芯片可通过总线连接。

#### 1.主存中存储单元地址的分配

主存各存储单元的空间位置是由单元地址号来表示的，而地址总线是用来指出存储单元地址号的，根据该地址可读出或写入一个存储字。

#### 2.主存的技术指标

主存的主要技术指标时存储容量和存储速度

##### （1）存储容量

存储容量是指主存能存放二进制代码的总位数，即

###### 存储容量=存储单位个数x存储字长

它的容量也可用字节总数来表示，即

###### 存储容量=存储单元个数x存储字长/8

##### （2）存储速度

存储速度是由存取时间和存取周期来表示的
存取时间又称为存储器的访问时间，是指启动一次存储器操作（读或写）到完成该操作所需要的全部时间。
存取周期是指存储器进行连续两次独立的存储器操作所需的最小间隔时间，通常存取周期大于存取是时间

##### （3）存取器带宽

与存取周期密切相关的指标为存储器带宽，他表示单位时间内存储器存取的信息量，单位可以字/秒，字节/秒或位/秒表示
存储器的带宽决定了以存储器为中心的机器获得信息的速度
为提高存储器带宽，可采用以下措施：

- 缩短存取周期
- 增加存储字长
- 增加存储体



### 辅助储器-磁盘

![](http://pre.jiatengfei.com//uploads/article/20200322/5e772d5d58e0c.png)

